## 问题分析

当前实现存在的问题：

1. **人物数据**：存储在 SQLite 数据库中，切换根目录后数据库已切换，但前端没有重新加载新数据库中的人物数据
2. **专题数据**：存储在 `user_data.json` 中全局共享，没有按根目录隔离

## 修复方案

### 任务 1：修复人物数据切换逻辑
在 `src/App.tsx` 中，切换根目录后添加重新加载人物数据的逻辑：
- 在 `handleOpenFolder` 和 `handleChangePath` 函数中，切换数据库后调用 `dbGetAllPeople()` 重新加载人物数据
- 更新 React state 中的人物数据

### 任务 2：将专题数据迁移到数据库
1. **后端 (Rust)**：
   - 在 `src-tauri/src/db/mod.rs` 中创建 `topics` 表
   - 在 `src-tauri/src/main.rs` 中添加专题相关的 Tauri 命令：
     - `db_save_topic` - 保存专题
     - `db_delete_topic` - 删除专题
     - `db_get_all_topics` - 获取所有专题

2. **前端 (TypeScript)**：
   - 在 `src/api/tauri-bridge.ts` 中添加专题数据库操作的桥接函数
   - 修改 `src/App.tsx` 中的专题加载逻辑，从数据库加载而非 `user_data.json`
   - 修改专题保存逻辑，保存到数据库而非 `user_data.json`

### 任务 3：测试验证
- 测试切换根目录时人物数据是否正确切换
- 测试切换根目录时专题数据是否正确切换
- 确保专题中的文件关联在切换后正确显示

## 涉及文件
- `src-tauri/src/db/mod.rs` - 添加 topics 表结构
- `src-tauri/src/main.rs` - 添加专题相关命令
- `src/api/tauri-bridge.ts` - 添加前端桥接函数
- `src/App.tsx` - 修改人物和专题数据加载/保存逻辑