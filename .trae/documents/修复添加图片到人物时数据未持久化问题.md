## 问题定位

在 `src/App.tsx` 的 `handleManualAddPerson` 函数（第1963-2021行）中，当用户将图片添加到人物时：

1. 更新了前端状态（files 和 people）
2. 显示了"已保存"提示
3. **但没有调用 `dbUpsertPerson` 将更新后的人物信息保存到数据库**

## 修复方案

在 `handleManualAddPerson` 函数中，当 `updated` 为 true 时，添加 `dbUpsertPerson` 调用来保存更新后的人物信息到数据库。

### 需要修改的代码位置
文件：`src/App.tsx`
函数：`handleManualAddPerson`（约第2008-2014行）

### 修改内容
在更新 `newPeople[personId]` 后，添加数据库保存调用：
```typescript
if (updated) {
  // 更新人物count和coverFileId
  const updatedPerson = {
    ...person,
    count: person.count + countIncrease,
    coverFileId: person.coverFileId || fileIds[0]
  };
  newPeople[personId] = updatedPerson;
  
  // 保存到数据库
  dbUpsertPerson(updatedPerson).catch(e => console.error("Failed to update person count in DB", e));

  return { ...prev, files: newFiles, people: newPeople, activeModal: { type: null } };
}
```

这个修复确保人物信息（特别是 count 和 coverFileId）在添加图片后被正确持久化到数据库，重启应用后数据不会丢失。